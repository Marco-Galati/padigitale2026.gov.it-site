"use strict";(self.webpackChunkprossimapa=self.webpackChunkprossimapa||[]).push([[239],{7274:function(e,t,a){a.d(t,{V:function(){return i}});var r=a(7294),n=a(5900),s=a.n(n),i=function(e){var t=e.bgColor,a=void 0===t?"":t,n=e.xPadding,i=void 0===n||n,o=e.className,c=e.yPaddingXLScreen,l=void 0===c||c,d=e.Tag,u=void 0===d?"div":d,p=e.ariaLabelledBy,m=e.children,y=s()("py-5",{"bg-primary":"primary"===a,"lightgrey-bg-a2":"light"===a},o),f=s()("container",{"py-xl-5":l,"px-3 px-md-0":i});return r.createElement("div",{className:y},r.createElement(u,{className:f,"aria-labelledby":p},m))}},8217:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var r=a(7294),n=a(8634),s=a(2656),i=a.n(s),o=a(5444),c=a(2980);function l(e){this.message=e}l.prototype=new Error,l.prototype.name="InvalidCharacterError";var d="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new l("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,r,n=0,s=0,i="";r=t.charAt(s++);~r&&(a=n%4?64*a+r:r,n++%4)?i+=String.fromCharCode(255&a>>(-2*n&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function u(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(d(e).replace(/(.)/g,(function(e,t){var a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a})))}(t)}catch(e){return d(t)}}function p(e){this.message=e}p.prototype=new Error,p.prototype.name="InvalidTokenError";var m=function(e,t){if("string"!=typeof e)throw new p("Invalid token specified");var a=!0===(t=t||{}).header?0:1;try{return JSON.parse(u(e.split(".")[a]))}catch(e){throw new p("Invalid token specified: "+e.message)}},y=a(7274),f=a(974),v=JSON.parse('{"loading":{"title":"Attendi la conferma"},"error":{"title":"Errore nella conferma","body":"Abbiamo riscontrato un problema tecnico: per favore riprova inviando nuovamente la richiesta.","button":"Riprova"},"success":{"title":"Indirizzo confermato","body":"L’indirizzo email che hai scelto per ricevere comunicazioni da PA Digitale 2026 è stato confermato. <br />Grazie!","button":"Prosegui sul sito"}}'),b=a(7046).Lo,g=b.title,h=b.description,w="loading",E="success",x="error",N=function(e,t){var a=t.type,r=t.payload;return a===w?{status:w}:a===x?{status:x,data:r}:a===E?{status:E,data:r}:e},k={status:w},C=function(e){var t=e.location,a=new URLSearchParams(t.search).get("jwt"),s=(0,o.K2)("2767305448").site.siteMetadata.apiUrl,l=(0,r.useReducer)(N,k),d=l[0],u=l[1],p=(0,r.useCallback)((0,n.Z)(i().mark((function e(){var t,r,n,o,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||a.match(/(^[\w-]*\.[\w-]*\.[\w-]*$)/)){e.next=3;break}return u({type:x,payload:"jwt not present or it seems it is not a valid jwt, "+a}),e.abrupt("return");case 3:return t=m(a),r=t.address,n=t.uuid,o={crossDomain:!0,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt:a})},e.prev=5,e.next=8,fetch(s+"/users/"+r+"/"+n+"/confirm",o);case 8:return c=e.sent,l=c.status,e.next=12,c.json();case 12:d=e.sent,u(l>=200&&l<=299?{type:E,payload:{message:d,status:l}}:{type:x,payload:{message:d,status:l}}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),u({type:x,payload:e.t0});case 19:case"end":return e.stop()}}),e,null,[[5,16]])}))),[s,a]);return(0,r.useEffect)((function(){p()}),[p]),r.createElement(r.Fragment,null,r.createElement(f.H,{title:g,description:h}),r.createElement("h1",{className:"sr-only"},g),r.createElement(y.V,null,d.status===w&&r.createElement("div",{className:"text-center text-primary"},r.createElement("div",{className:"display-3"},v[d.status].title),r.createElement("div",{className:"progress-spinner progress-spinner-active mx-auto mt-5"},r.createElement("span",{className:"sr-only"},"Caricamento..."))),d.status===x&&r.createElement("div",{className:"text-center text-primary"},r.createElement("div",{className:"display-3"},v[d.status].title),r.createElement("div",{className:"my-4 text-dark",dangerouslySetInnerHTML:{__html:v[d.status].body}}),r.createElement(c.zx,{type:"button",className:"btn text-uppercase btn-danger",onClick:p},v[d.status].button)),d.status===E&&r.createElement("div",{className:"text-center text-primary"},r.createElement("div",{className:"display-3"},v[d.status].title),r.createElement("div",{className:"my-4 text-dark",dangerouslySetInnerHTML:{__html:v[d.status].body}}),r.createElement(o.rU,{to:"/",className:"btn text-uppercase btn-primary"},v[d.status].button))))},S=function(e){return r.createElement(C,e)}}}]);
//# sourceMappingURL=component---src-pages-conferma-jsx-cb750473f459f042213f.js.map